<div *ngIf="isLoading" class="loading">Loading products...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<ul class="product-grid" *ngIf="!isLoading && !error">
  <li *ngFor="let product of availableProducts"
      class="product-card" 
      [class.low-quantity]="product.quantity < 10">
    
    <img class="product-image" [src]="product.imageUrl" [alt]="product.productTitle" />
    <div class="product-info">
      <h3 class="product-title">{{ product.productTitle }}</h3>
      <p class="product-price">{{ product.productPrice | currency }}</p>
    </div>
    
    <button (click)="selectProduct(product)" class="details-button">
      {{ (selectedProduct?.productId === product.productId) ? 'Cacher' : 'DÃ©tails' }}
    </button>
    
    <div *ngIf="selectedProduct?.productId === product.productId" class="product-details-panel">
      <p class="product-description">{{ product.description }}</p>
      <p class="product-stock">In stock: {{ product.quantity }}</p>
    </div>
  </li>
</ul>

<app-product-details *ngIf="selectedProduct" [product]="selectedProduct"></app-product-details>